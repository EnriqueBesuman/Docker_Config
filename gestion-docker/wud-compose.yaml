# https://github.com/EnriqueBesuman/Docker_Config
#
version: "3.8"

services:

###################
# WHATS UP DOCKER #
###################
#
# https://192.168.1.254:3000
#
  wud:
    image: fmartinou/whats-up-docker:latest
    container_name: wud
    restart: unless-stopped
    security_opt:
    - no-new-privileges:true
    ports:
      - 3000:3000
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
      - /docker/whatsupdocker/config/:/store
    environment:
      - TZ=${TZ}
      - PUID=${PUID}
      - PGID=${PGID}
      - WUD_REGISTRY_LSCR_TOKEN=${WUD_REGISTRY_LSCR_TOKEN}      
      - WUD_TRIGGER_SMTP_GMAIL_HOST=smtp.gmail.com
      - WUD_TRIGGER_SMTP_GMAIL_PORT=465
      - WUD_TRIGGER_SMTP_GMAIL_USER=${EMAIL_PERSONAL}
      - WUD_TRIGGER_SMTP_GMAIL_PASS=${WUD_EMAIL_PERSONAL_PWD}
      - WUD_TRIGGER_SMTP_GMAIL_FROM=${EMAIL_PERSONAL}
      - WUD_TRIGGER_SMTP_GMAIL_TO=${EMAIL_PERSONAL}
      - WUD_TRIGGER_SMTP_GMAIL_TLS_ENABLED=true       
      - WUD_TRIGGER_MQTT_WUD_URL=${MQTT_URL}
      - WUD_TRIGGER_MQTT_WUD_USER=${MQTT_USR}
      - WUD_TRIGGER_MQTT_WUD_PASSWORD=${MQTT_PWD}
      - WUD_TRIGGER_MQTT_WUD_HASS_ENABLED=true   
      - WUD_TRIGGER_SMTP_GMAIL_SIMPLETITLE=Hay una nueva versi√≥n de $${name} disponible!
      - WUD_TRIGGER_SMTP_GMAIL_SIMPLEBODY=La imagen $${name} $${local} ha sido actualizada a la &&{remote}. Por favor, actualizala y reejecuta el contenedor. Gracias!
    labels: # Labels de What's up Docker
      - wud.display.name=What's up Docker
      - wud.display.icon=mdi:train-car-container

networks:
  default:
    ipam:
      driver: default
      config:
        - subnet: 192.168.22.0/20
